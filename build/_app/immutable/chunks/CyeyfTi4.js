import"./Bzak7iHL.js";import"./_cTFHsCP.js";import{o as T}from"./CUqlurZA.js";import{I as W,J as X,f as V,c as C,s as M,n as Y,r as A,G as z,a as r,p as $,aB as h,aC as tt,aD as _,aA as b,b as et,j as y,aj as w,e,F as q}from"./BEwaqqRn.js";import{i as O,s as at,a as st}from"./Du9JZrCH.js";import{i as it}from"./CcmhthiT.js";import{p as rt}from"./DqMgYedN.js";import{l as ot,i as nt,b as p,a as lt}from"./cABREqu9.js";function dt(n,a,c,l,t){var x;W&&X();var i=(x=a.$$slots)==null?void 0:x[c],o=!1;i===!0&&(i=a.children,o=!0),i===void 0||i(n,o?()=>l:l)}var ct=V('<div class="min-h-screen flex items-center justify-center bg-gray-50"><div class="max-w-md w-full space-y-8 p-8"><div class="text-center"><h2 class="mt-6 text-3xl font-extrabold text-gray-900">PiceConsole</h2> <p class="mt-2 text-sm text-gray-600">게임 운영자 전용 콘솔에 오신 것을 환영합니다</p></div> <div class="mt-8 space-y-6"><button class="group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition duration-150 ease-in-out"><svg class="w-5 h-5 mr-2" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C13.1 2 14 2.9 14 4V8H18C18.6 8 19 8.4 19 9V20C19 20.6 18.6 21 18 21H6C5.4 21 5 20.6 5 20V9C5 8.4 5.4 8 6 8H10V4C10 2.9 10.9 2 12 2M12 4C11.4 4 11 4.4 11 5V8H13V5C13 4.4 12.6 4 12 4M12 13C12.8 13 13.5 13.7 13.5 14.5S12.8 16 12 16 10.5 15.3 10.5 14.5 11.2 13 12 13Z"></path></svg> Azure AD로 로그인</button> <div class="text-xs text-gray-500 text-center mt-4"><p>운영자 계정으로만 접근 가능합니다</p></div></div></div></div>');function ut(n){var a=ct(),c=C(a),l=M(C(c),2),t=C(l);Y(2),A(l),A(c),A(a),z("click",t,function(...i){var o;(o=ot)==null||o.apply(this,i)}),r(n,a)}var ft=V('<div class="min-h-screen flex items-center justify-center bg-gray-50"><div class="flex flex-col items-center"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mb-4"></div> <p class="text-sm text-gray-600">인증 정보를 확인하는 중...</p></div></div>');function vt(n){var a=ft();r(n,a)}var mt=V('<div class="min-h-screen flex items-center justify-center bg-gray-50"><div class="max-w-md w-full space-y-8 p-8"><div class="text-center"><h2 class="mt-6 text-3xl font-extrabold text-gray-900">접근 권한이 없습니다</h2> <p class="mt-2 text-sm text-gray-600">이 페이지에 접근하려면 운영자 권한이 필요합니다.</p></div></div></div>'),gt=V('<div class="min-h-screen flex items-center justify-center bg-gray-50"><div class="max-w-md w-full space-y-8 p-8 text-center"><h2 class="text-2xl font-bold text-gray-900">인증 오류</h2> <p class="text-sm text-gray-600">인증 상태를 확인할 수 없습니다.</p> <button class="bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700">페이지 새로고침</button></div></div>');function At(n,a){$(a,!1);const[c,l]=at(),t=()=>st(lt,"$authState",c),i=w(),o=w(),x=w(),S=w();let d=rt(a,"requireOperator",8,!1),s=w(!1);T(async()=>{console.log("AuthGuard mounted, requireOperator:",d()),y(s,!0),await nt()}),h(()=>(e(s),t(),q(d()),p),()=>{e(s)&&t()&&console.log("AuthGuard state update:",{isLoading:t().isLoading,isAuthenticated:t().isAuthenticated,requireOperator:d(),userCanOperate:p()})}),h(()=>(e(s),t(),q(d()),p),()=>{y(i,e(s)&&t().isAuthenticated&&(!d()||p()))}),h(()=>(e(s),t()),()=>{y(o,e(s)&&!t().isLoading&&!t().isAuthenticated)}),h(()=>(e(s),t(),q(d()),p),()=>{y(x,e(s)&&!t().isLoading&&t().isAuthenticated&&d()&&!p())}),h(()=>(e(s),t()),()=>{y(S,!e(s)||t().isLoading)}),tt(),it();var k=_(),B=b(k);{var D=u=>{vt(u)},F=u=>{var G=_(),I=b(G);{var J=f=>{ut(f)},P=f=>{var H=_(),R=b(H);{var U=v=>{var L=mt();r(v,L)},Z=v=>{var L=_(),E=b(L);{var K=m=>{var g=_(),j=b(g);dt(j,a,"default",{}),r(m,g)},N=m=>{var g=gt(),j=C(g),Q=M(C(j),4);A(j),A(g),z("click",Q,()=>window.location.reload()),r(m,g)};O(E,m=>{e(i)?m(K):m(N,!1)},!0)}r(v,L)};O(R,v=>{e(x)?v(U):v(Z,!1)},!0)}r(f,H)};O(I,f=>{e(o)?f(J):f(P,!1)},!0)}r(u,G)};O(B,u=>{e(S)?u(D):u(F,!1)})}r(n,k),et(),l()}export{At as A,dt as s};
