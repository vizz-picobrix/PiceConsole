import"../chunks/Bzak7iHL.js";import"../chunks/C_sxblVB.js";import{k as F,l as vt,aX as ft,aY as ut,aZ as pt,p as Q,aU as V,e as z,g as r,m as $,i as x,a_ as Y,d as O,a as p,b as tt,f as M,c as o,r as n,s as C,n as nt,t as J,a$ as G,b0 as mt,O as rt}from"../chunks/BIDjyk3p.js";import{s as I}from"../chunks/CIe0VHW6.js";import{t as gt,e as xt,i as ht,s as bt}from"../chunks/HXesvCXG.js";import{i as et}from"../chunks/BQ0KO1uK.js";import{a as st,s as at}from"../chunks/Bryx3mZz.js";import{s as _t}from"../chunks/Co7aA7kE.js";import{i as R}from"../chunks/CERB1pd5.js";import{b as it,p as yt}from"../chunks/DbN9pfXJ.js";import{a as lt,b as wt,l as $t,i as At,c as Z}from"../chunks/DpY92fk1.js";import{o as Ct}from"../chunks/Bog0WDVd.js";function ct(t,e,i,l,s){var u;F&&vt();var a=(u=e.$$slots)==null?void 0:u[i],c=!1;a===!0&&(a=e.children,c=!0),a===void 0||a(t,c?()=>l:l)}function Mt(t,e,i,l){var s=t.__style;if(F||s!==e){var a=gt(e);(!F||a!==t.getAttribute("style"))&&(a==null?t.removeAttribute("style"):t.style.cssText=a),t.__style=e}return l}const kt=Symbol("is custom element"),St=Symbol("is html");function Lt(t,e,i,l){var s=Ht(t);F&&(s[e]=t.getAttribute(e),t.nodeName==="LINK")||s[e]!==(s[e]=i)&&(i==null?t.removeAttribute(e):typeof i!="string"&&jt(t).includes(e)?t[e]=i:t.setAttribute(e,i))}function Ht(t){return t.__attributes??(t.__attributes={[kt]:t.nodeName.includes("-"),[St]:t.namespaceURI===ft})}var ot=new Map;function jt(t){var e=ot.get(t.nodeName);if(e)return e;ot.set(t.nodeName,e=[]);for(var i,l=t,s=Element.prototype;s!==l;){i=pt(l);for(var a in i)i[a].set&&e.push(a);l=ut(l)}return e}const Dt=()=>{const t=_t;return{page:{subscribe:t.page.subscribe},navigating:{subscribe:t.navigating.subscribe},updated:t.updated}},Et={subscribe(t){return Dt().page.subscribe(t)}};var Nt=M('<div class="w-48 bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5 overflow-auto transition-opacity duration-150"><div class="py-1"><div class="px-4 py-2 text-sm text-gray-900 border-b border-gray-200"><p class="font-medium"> </p> <p class="text-xs text-gray-500 mt-1"> </p></div> <button class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">로그아웃</button></div></div>'),Ut=M('<div class="relative"><button class="flex items-center space-x-2 text-sm text-gray-700 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 rounded-md p-2"><div class="w-8 h-8 bg-indigo-600 rounded-full flex items-center justify-center"><span class="text-white text-sm font-medium"> </span></div> <span class="hidden md:block"> </span> <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button> <!></div>');function zt(t,e){Q(e,!1);const[i,l]=at(),s=()=>st(lt,"$authState",i);let a=$(!1),c=$(),u=$(),k=$(""),m=$(!1);function g(){r(a)?(x(a,!1),x(m,!1)):(x(m,!1),x(a,!0),requestAnimationFrame(()=>{S(),x(m,!0)}))}function S(){if(!r(c)||!r(u))return;const v=r(u).getBoundingClientRect(),E=window.innerWidth,_=window.innerHeight,H=192,f=8;let y=v.left;y+H>E-f&&(y=v.right-H),y=Math.max(f,y);const j=_-v.bottom-f,P=v.top-f,q=80;let h,d;j>=q||j>=P?(h=v.bottom+4,d=Math.max(80,j-4)):(h=Math.max(f,v.top-Math.max(80,P-4)),d=v.top-h-4),d=Math.min(d,_-f*2),x(k,`
			position: fixed;
			left: ${y}px;
			top: ${h}px;
			max-height: ${d}px;
			z-index: 9998;
			opacity: 1;
		`)}function T(){wt()}et();var L=V();z("click",Y,v=>{r(a)&&!v.target.closest(".relative")&&!v.target.closest('[style*="position: fixed"]')&&x(a,!1)}),z("resize",Y,()=>{r(a)&&r(m)&&S()}),z("scroll",Y,()=>{r(a)&&r(m)&&S()});var A=O(L);{var b=v=>{var E=Ut(),_=o(E),H=o(_),f=o(H),y=o(f,!0);n(f),n(H);var j=C(H,2),P=o(j,!0);n(j),nt(2),n(_),it(_,d=>x(u,d),()=>r(u));var q=C(_,2);{var h=d=>{var N=Nt(),W=o(N),B=o(W),w=o(B),D=o(w,!0);n(w);var U=C(w,2),K=o(U);n(U),n(B);var dt=C(B,2);n(W),n(N),it(N,X=>x(c,X),()=>r(c)),J(X=>{Mt(N,r(m)?r(k):"position: fixed; left: -9999px; top: -9999px; opacity: 0; z-index: 9998;"),I(D,s().user.userDetails),I(K,`역할: ${X??""}`)},[()=>s().user.userRoles.join(", ")]),z("click",dt,T),p(d,N)};R(q,d=>{r(a)&&d(h)})}n(E),J(d=>{I(y,d),I(P,s().user.userDetails)},[()=>s().user.userDetails.charAt(0).toUpperCase()]),z("click",_,g),p(v,E)};R(A,v=>{s().isAuthenticated&&s().user&&v(b)})}p(t,L),tt(),l()}var Pt=M("<a> </a>"),Vt=M('<header class="bg-white shadow-sm border-b"><nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"><div class="flex justify-between h-16"><div class="flex items-center"><a href="/" class="flex-shrink-0 font-bold text-xl text-blue-600">PiceConsole</a></div> <div class="flex items-center space-x-8"><!> <!></div></div></nav></header>');function Ot(t,e){Q(e,!1);const[i,l]=at(),s=()=>st(Et,"$page",i),a=[{name:"Dashboard",href:"/"},{name:"Game Management",href:"/admin/games"},{name:"User Management",href:"/admin/users"},{name:"Analytics",href:"/admin/analytics"}];et();var c=Vt(),u=o(c),k=o(u),m=C(o(k),2),g=o(m);xt(g,1,()=>a,ht,(T,L)=>{var A=Pt(),b=o(A,!0);n(A),J(()=>{Lt(A,"href",r(L).href),bt(A,1,`text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium transition-colors
							${s().url.pathname===r(L).href?"text-blue-600 bg-blue-50":""}`),I(b,r(L).name)}),p(T,A)});var S=C(g,2);zt(S,{}),n(m),n(k),n(u),n(c),p(t,c),tt(),l()}var Rt=M('<div class="min-h-screen flex items-center justify-center bg-gray-50"><div class="max-w-md w-full space-y-8 p-8"><div class="text-center"><h2 class="mt-6 text-3xl font-extrabold text-gray-900">PiceConsole</h2> <p class="mt-2 text-sm text-gray-600">게임 운영자 전용 콘솔에 오신 것을 환영합니다</p></div> <div class="mt-8 space-y-6"><button class="group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition duration-150 ease-in-out"><svg class="w-5 h-5 mr-2" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C13.1 2 14 2.9 14 4V8H18C18.6 8 19 8.4 19 9V20C19 20.6 18.6 21 18 21H6C5.4 21 5 20.6 5 20V9C5 8.4 5.4 8 6 8H10V4C10 2.9 10.9 2 12 2M12 4C11.4 4 11 4.4 11 5V8H13V5C13 4.4 12.6 4 12 4M12 13C12.8 13 13.5 13.7 13.5 14.5S12.8 16 12 16 10.5 15.3 10.5 14.5 11.2 13 12 13Z"></path></svg> Azure AD로 로그인</button> <div class="text-xs text-gray-500 text-center mt-4"><p>운영자 계정으로만 접근 가능합니다</p></div></div></div></div>');function Tt(t){var e=Rt(),i=o(e),l=C(o(i),2),s=o(l);nt(2),n(l),n(i),n(e),z("click",s,function(...a){var c;(c=$t)==null||c.apply(this,a)}),p(t,e)}var qt=M('<div class="min-h-screen flex items-center justify-center bg-gray-50"><div class="flex flex-col items-center"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mb-4"></div> <p class="text-sm text-gray-600">인증 정보를 확인하는 중...</p></div></div>');function Bt(t){var e=qt();p(t,e)}var It=M('<div class="min-h-screen flex items-center justify-center bg-gray-50"><div class="max-w-md w-full space-y-8 p-8"><div class="text-center"><h2 class="mt-6 text-3xl font-extrabold text-gray-900">접근 권한이 없습니다</h2> <p class="mt-2 text-sm text-gray-600">이 페이지에 접근하려면 운영자 권한이 필요합니다.</p></div></div></div>'),Wt=M('<div class="min-h-screen flex items-center justify-center bg-gray-50"><div class="max-w-md w-full space-y-8 p-8 text-center"><h2 class="text-2xl font-bold text-gray-900">인증 오류</h2> <p class="text-sm text-gray-600">인증 상태를 확인할 수 없습니다.</p> <button class="bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700">페이지 새로고침</button></div></div>');function Gt(t,e){Q(e,!1);const[i,l]=at(),s=()=>st(lt,"$authState",i),a=$(),c=$(),u=$(),k=$();let m=yt(e,"requireOperator",8,!1),g=$(!1);Ct(async()=>{x(g,!0),await At()}),G(()=>(r(g),s(),rt(m()),Z),()=>{x(a,r(g)&&s().isAuthenticated&&(!m()||Z()))}),G(()=>(r(g),s()),()=>{x(c,r(g)&&!s().isLoading&&!s().isAuthenticated)}),G(()=>(r(g),s(),rt(m()),Z),()=>{x(u,r(g)&&!s().isLoading&&s().isAuthenticated&&m()&&!Z())}),G(()=>(r(g),s()),()=>{x(k,!r(g)||s().isLoading)}),mt(),et();var S=V(),T=O(S);{var L=b=>{Bt(b)},A=b=>{var v=V(),E=O(v);{var _=f=>{Tt(f)},H=f=>{var y=V(),j=O(y);{var P=h=>{var d=It();p(h,d)},q=h=>{var d=V(),N=O(d);{var W=w=>{var D=V(),U=O(D);ct(U,e,"default",{}),p(w,D)},B=w=>{var D=Wt(),U=o(D),K=C(o(U),4);n(U),n(D),z("click",K,()=>window.location.reload()),p(w,D)};R(N,w=>{r(a)?w(W):w(B,!1)},!0)}p(h,d)};R(j,h=>{r(u)?h(P):h(q,!1)},!0)}p(f,y)};R(E,f=>{r(c)?f(_):f(H,!1)},!0)}p(b,v)};R(T,b=>{r(k)?b(L):b(A,!1)})}p(t,S),tt(),l()}var Zt=M('<div class="min-h-screen bg-gray-50"><!> <main class="container mx-auto px-4 py-8"><!></main></div>');function oe(t,e){Gt(t,{children:(i,l)=>{var s=Zt(),a=o(s);Ot(a,{});var c=C(a,2),u=o(c);ct(u,e,"default",{}),n(c),n(s),p(i,s)},$$slots:{default:!0}})}export{oe as component};
