import{w as o}from"./DGJAQINX.js";const s=o({user:null,isAuthenticated:!1,isLoading:!0});async function n(){try{const e=await fetch("/.auth/me");if(!e.ok)return null;const i=(await e.json()).clientPrincipal;return i?{userId:i.userId,userDetails:i.userDetails,userRoles:i.userRoles||[],identityProvider:i.identityProvider}:null}catch(e){return console.error("Failed to fetch user info:",e),null}}async function r(){s.update(t=>({...t,isLoading:!0}));const e=await n();s.update(t=>({...t,user:e,isAuthenticated:!!e,isLoading:!1}))}function l(){let e=null;return s.subscribe(t=>{e=t.user})(),console.log("isOperator check:",{hasUser:!!e,userRoles:e==null?void 0:e.userRoles,userDetails:e==null?void 0:e.userDetails}),!!e}function u(){window.location.href="/login"}function c(){window.location.href="/logout"}export{s as a,l as b,c,r as i,u as l};
